{% extends 'agora/base_template.html' %}

{% block title %}
{% if current_topic %}
    {{ current_topic.name }} : {{ post.name }}
{% else %}
    Post
{% endif %}
{% endblock %}

{% block head_block %}

{% endblock %}


{% block body_block %}

{% if post %}
    <p> in <a href="/agora/topics/{{ post.topic.id }}/">{{ post.topic.name }}</a></p>
    {% if post.parent %}
        <h4><a href="/agora/topics/{{ post.topic.id }}/posts/{{ post.parent.id }}">{{ post.parent.name }}</a></h4>
    {% endif %}
    <h2><a href="/agora/topics/{{ post.topic.id }}/posts/{{ post.id }}">{{ post.name }}</a></h2>
    - {{ post.author.username }}: {{ post.created_at }} <br>
    current vote average: {{ post.direct_value }} <br>
    current liquid average: {{ post.liquid_value }} <br>
    current vote heat: {{ post.direct_heat }} <br>
    current liquid heat: {{ post.liquid_heat }} <br>
    current vote count: {{ post.postvote_set.all|length }} <br>
    your vote: <br>
    <a href="/agora/topics/{{ post.topic.id }}/posts/{{ post.id }}/vote/">vote!</a><br>

    <a href="/agora/topics/{{ current_topic.id }}/newpost/{{ post.id }}">Reply to Post</a>
    <h4>replies</h4>
    <ul>
        {% for child_post in post.post_set.all %}
            <li><a href="/agora/topics/{{ post.topic.id }}/posts/{{ child_post.id }}">{{ child_post.name }}</a></li>
        {% endfor %}
    </ul>

{% else %}
    <p> post not found </p>
{% endif %}
{% endblock %}